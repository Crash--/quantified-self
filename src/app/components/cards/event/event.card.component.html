<md-card>
  <md-card-header>
    <!--<div mdCardAvatar class="example-header-image"></div>-->
    <md-card-title>
      {{ event.getName() }}
    </md-card-title>
    <app-event-card-actions-menu [event]="event" align="end"></app-event-card-actions-menu>

    <md-card-subtitle>
      {{ event.getFirstActivity().getStartDate() | date:'medium' }}
    </md-card-subtitle>
    <md-card-subtitle>
      {{ (event.getDistanceInMeters()/1000).toFixed(1) }} km in about {{ event.getTotalDurationInSeconds() |
      amDuration:'seconds' }}
    </md-card-subtitle>
  </md-card-header>


  <md-card-content>

    <md-tab-group [dynamicHeight]="true" [selectedIndex]="selectedTabIndex"
                  (selectedIndexChange)="selectedTabIndexChange($event)">
      <md-tab label="Map" *ngIf="event.getPointsWithPosition().length > 0"> <!-- todo check performance on if -->
        <ng-template mdTabLabel>
          <md-icon>map</md-icon>
        </ng-template>
        <app-event-card-map
          [event]="event" [resize]="selectedTabIndex === 0">
        </app-event-card-map>
      </md-tab>
      <md-tab label="Stats">
        <ng-template mdTabLabel>
          <md-icon>insert_chart</md-icon>
        </ng-template>
        <app-event-card-stats
          [event]="event">
        </app-event-card-stats>
      </md-tab>
      <md-tab label="Chart">
        <ng-template mdTabLabel>
          <md-icon>show_chart</md-icon>
        </ng-template>
        <app-event-card-chart *ngIf="selectedTabIndex === 2" [event]="event">
        </app-event-card-chart>
      </md-tab>
      <md-tab label="Laps" *ngIf="event.getLaps().length > 0">
        <ng-template mdTabLabel>
          <md-icon>linear_scale</md-icon>
        </ng-template>
        <app-event-card-laps [event]="event">
        </app-event-card-laps>
      </md-tab>
    </md-tab-group>

  </md-card-content>
</md-card>
